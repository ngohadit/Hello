<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Game Slot 5x3</title>
  <style>
    body {
      margin: 0;
      background: linear-gradient(to bottom, #1a1a1a, #000);
      font-family: 'Playfair Display', serif;
      color: #fff;
      overflow: hidden;
    }
    .container {
      text-align: center;
      padding: 20px;
    }
    .status-bar {
      display: flex;
      justify-content: space-around;
      margin-bottom: 10px;
      font-size: 18px;
    }
    .slot-machine {
      display: grid;
      grid-template-columns: repeat(5, 80px);
      grid-template-rows: repeat(3, 80px);
      gap: 5px;
      justify-content: center;
      margin: 20px auto;
    }
    .slot-cell {
      background: #222;
      border: 3px solid gold;
      font-size: 30px;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 12px;
      box-shadow: 0 0 10px gold;
    }
    .controls {
      margin-top: 20px;
    }
    .controls button {
      font-size: 18px;
      padding: 10px 20px;
      margin: 5px;
      background: gold;
      color: black;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    .message {
      margin-top: 10px;
      font-size: 16px;
      color: red;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 style="color: gold;">üé∞ SLOT GAME 5x3 üé∞</h1>
    <div class="status-bar">
      <div>S·ªë d∆∞: <span id="balance">5.00</span> VND</div>
      <div>Ti·ªÅn c∆∞·ª£c: <span id="bet">1.00</span> VND</div>
      <div>Ti·ªÅn th·∫Øng: <span id="win">0.00</span> VND</div>
    </div>
    <div class="slot-machine" id="slots">
      <!-- T·∫°o 15 √¥ -->
    </div>
    <div class="controls">
      <button onclick="adjustBet(-0.20)">-</button>
      <button onclick="spin()">üîÅ Quay</button>
      <button onclick="adjustBet(0.20)">+</button>
    </div>
    <div class="message" id="message"></div>
  </div>

  <script>
    const symbols = ['A', 'J', 'W', 'S']; // S l√† Scatter
    const payouts = { A: 0.2, J: 0.8, W: 1.2 };
    let balance = 5.00;
    let bet = 1.00;
    let win = 0;

    const slotEl = document.getElementById('slots');
    const balanceEl = document.getElementById('balance');
    const betEl = document.getElementById('bet');
    const winEl = document.getElementById('win');
    const msgEl = document.getElementById('message');

    // Kh·ªüi t·∫°o giao di·ªán √¥ slot
    function initSlots() {
      slotEl.innerHTML = '';
      for (let i = 0; i < 15; i++) {
        const div = document.createElement('div');
        div.className = 'slot-cell';
        div.innerText = '?';
        slotEl.appendChild(div);
      }
    }

    function adjustBet(amount) {
      let newBet = parseFloat((bet + amount).toFixed(2));
      if (newBet >= 0.2 && newBet <= 3.00) {
        bet = newBet;
        betEl.innerText = bet.toFixed(2);
      }
    }

    function spin() {
      msgEl.innerText = '';
      if (balance < bet) {
        msgEl.innerText = '‚ö†Ô∏è T√†i kho·∫£n kh√¥ng ƒë·ªß s·ªë d∆∞!';
        return;
      }

      const result = [];
      for (let i = 0; i < 15; i++) {
        const rand = symbols[Math.floor(Math.random() * symbols.length)];
        result.push(rand);
        slotEl.children[i].innerText = rand;
      }

      balance -= bet;
      balance = parseFloat(balance.toFixed(2));
      balanceEl.innerText = balance.toFixed(2);

      win = calculateWin(result);
      balance += win;
      balance = parseFloat(balance.toFixed(2));
      balanceEl.innerText = balance.toFixed(2);
      winEl.innerText = win.toFixed(2);
    }

    function calculateWin(arr) {
      let totalWin = 0;
      let scatterCount = 0;

      for (let i = 0; i < arr.length; i++) {
        if (arr[i] === 'S') scatterCount++;
      }

      // Check 5 h√†ng d·ªçc (5 c·ªôt, 3 h√†ng)
      for (let col = 0; col < 5; col++) {
        const start = col;
        const symbol = arr[start];
        if (symbol !== 'S') {
          if (
            symbol === arr[col + 5] &&
            symbol === arr[col + 10]
          ) {
            totalWin += bet * payouts[symbol];
          }
        }
      }

      // Scatter th∆∞·ªüng
      if (scatterCount === 3) {
        msgEl.innerText = 'üéÅ Tr√∫ng 10 l∆∞·ª£t quay mi·ªÖn ph√≠!';
      } else if (scatterCount >= 4) {
        msgEl.innerText = 'üéâ Tr√∫ng 12 l∆∞·ª£t quay mi·ªÖn ph√≠!';
      }

      return totalWin;
    }

    initSlots();
  </script>
</body>
</html>
